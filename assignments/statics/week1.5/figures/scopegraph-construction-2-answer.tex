\documentclass[crop,tikz]{standalone}
\usepackage{amsmath}
\input{scopegraphs}
\begin{document}
\begin{tikzpicture}[scopegraph]
  \node[scope] (s0) {$0$};
  \node[decl, left = of s0.center] (A1) {$\occ{A}{1}$};
  \draw (s0) edge (A1);
  \node[scope, left = of A1.center] (s1) {$1$};
  \draw (s1) edge[lbl = {P}, bend left] (s0);
  \draw (A1) edge[export, lbl = {I}] (s1);
  \node[decl, left = of s1.center] (f2) {$\occ{f}{2}$};
  \draw (s1) edge (f2);
  \node[decl, right = of s0.center] (B3) {$\occ{B}{3}$};
  \draw (s0) edge (B3);
  \node[scope, below = of B3.center] (s3) {$3$};
  \draw (s3) edge[lbl = {P}] (s0);
  \draw (B3) edge[export, lbl = {I}, right] (s3);
  \node[ref, left = of s3.center] (A4) {$\occ{A}{4}$};
  \draw (A4) edge (s0);
  \draw (s3) edge[import, lbl = {I}] (A4);
  \node[decl, right = of s3.center] (m5) {$\occ{m}{5}$};
  \draw (s3) edge (m5);
  \node[scope, below = of s3.center] (s4) {$4$};
  \draw (s4) edge[lbl = {P}] (s3);
  \node[decl, right = of s4.center] (g6) {$\occ{g}{6}$};
  \draw (s4) edge (g6);
  \node[ref, left = of s4.center] (f8) {$\occ{f}{8}$};
  \draw (f8) edge (s4);
  \node[ref, left = of f8.center] (g7) {$\occ{g}{7}$};
  \draw (g7) edge[bend right] (s4);

  \node[draw=none] at (5, -.75) (params) {$\begin{aligned}
      \Wf &= \lblt{P}^\ast \lblt{I}^\ast \\
      \Ord &= \begin{aligned}[t]
        \decllblt &< \lblt{P} \\
        \decllblt &< \lblt{I} \\
        \lblt{I} &< \lblt{P}
      \end{aligned}
    \end{aligned}$};
\end{tikzpicture}
\end{document}
